# IP和用户名对应
## 一、使用场景
当新用户上线时，客户端弹出：XXX上线
当在线用户下线时，客户端弹出：XXX下线
其中XXX为用户名
## 二、难点
- 上线的问题容易解决，下线时，应用层不知道是哪个用户下线了
- 由于采用了分层设计方法，通讯层不知道用户名，而应用层不知道IP地址
- 上线时，通讯层知道，但此时没有用户名
- 应用层并不需要知道要发到哪个地址，来自哪个地址，只是需要知道是谁下线了
## 三、解决思路
### 思路1
1. 客户端连接上之后，发送的第一条信息为一个特殊信息（对应用层来说）
2. 服务器的应用层识别后添加该用户的网络信息及用户名到列表
3. 当一个用户下线后，应用层通过网络信息找到用户名，通知其他用户
### 思路2
1. 通信层每收到一个信息，就把该信息来源的网络信息附上，一起发给应用层
2. 应用层判断该用户是否在用户名单中，如果不在，则加入到列表
3. 当用户下线时，应用层通过网络信息找到用户